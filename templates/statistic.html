<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="refresh" content="5" />
    <title>СУО ДГТУ: Табло</title>
    <link rel="stylesheet" type="text/css" href="../static/css/w3pro.css" />
    <link rel="stylesheet" type="text/css" href="../static/css/additionals.css" />
  </head>
  <body>
    <div class="w3-bar w3-center a-grey">
      <div class="w3-bar-item w3-center" style="width: 5%">
        <img src="../static/img/icons/dstu.svg" alt="ДГТУ" width="40" height="40" />
      </div>
      <div class="w3-bar-item w3-center" style="width: 90%">
        <h2>
          <b><b id="date">12.12.2022</b> <b id="time">12:20:00</b></b>
        </h2>
      </div>
      <div class="w3-bar-item w3-center" style="width: 5%"></div>
    </div>
    <div class="w3-bar a-grey">
      <div class="w3-bar-item w3-center" style="width: 50%">
        <h2><b class="w3-centered">Вызваны</b></h2>
      </div>
      <div class="w3-bar-item w3-center" style="width: 50%">
        <h2><b class="w3-centered">В очереди</b></h2>
      </div>
    </div>
    <table class="w3-table-all w3-left w3-centered w3-xxlarge" style="width: 50%">
      <tr>
        <th>
          <h1><b>Талон</b></h1>
        </th>
        <th>
          <h1><b>Кабинет</b></h1>
        </th>
      </tr>
      <tr>
        <td><h1>{% if (not tickets) or (OP==False): %} Талоны не вызваны{% else: %} {{ tickets[0].type }}-{{'{:03}'.format(tickets[0].id) }} {% endif %}</h1></td>
        <td><h1>{% if (not tickets) or (OP==False): %} {% else: %} {{ tickets[0].room }}/1 {% endif %}</h1></td>
      </tr>
    </table>
    <table class="w3-table-all w3-right w3-centered w3-xxlarge" style="width: 50%">
      <tr>
        <th>
          <h1><b>Талон</b></h1>
        </th>
        <th>
          <h1><b>Кабинет</b></h1>
        </th>
      </tr>
      {% for element in range(start, temp) %}
      <tr>
        <td><h1>{% if (temp>=1): %}{{ tickets[element].type }}-{{'{:03}'.format(tickets[element].id) }}{% endif %}</h1></td>
        <td><h1>{% if (temp>=1): %}{{ tickets[element].room }}{% endif %}</h1></td>
      </tr>
      {% endfor %}
    </table>
    <script>
      const milliseconds = 10;
      setInterval(() => {
        var date = new Date();
        var current_date = date.getDate() + "." + 12 + "." + date.getFullYear();
        document.getElementById("date").innerHTML = current_date;
        var current_time = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
        document.getElementById("time").innerHTML = current_time;
      }, milliseconds);
    </script>
  </body>
</html>
